<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>タイピングゲーム</title>
    <style>
        body {
            background-color: #2d3436;
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            /* こだわりの細い書体設定 */
            font-family: 'Helvetica Neue', Arial, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', sans-serif;
            font-weight: 100; 
            transition: background-color 0.1s;
            overflow: hidden;
        }
        #info { font-size: 1.2rem; color: #b2bec3; margin-bottom: 10px; font-weight: 200; }
        #timer { font-size: 1.2rem; color: #ffeaa7; margin-bottom: 5px; font-weight: 200; }
        
        #word-display {
            font-size: 5.5rem;
            letter-spacing: 0.1rem;
            margin-bottom: 20px;
            /* 文字をより細く見せる設定 */
            -webkit-font-smoothing: antialiased;
        }
        .correct { color: #55efc4; }
        .current { border-bottom: 2px solid #0984e3; }
        
        #score { font-size: 1.5rem; color: #fab1a0; font-weight: 200; }

        #overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(45, 52, 54, 0.98);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }
        button {
            padding: 12px 50px;
            font-size: 1.8rem;
            background: none;
            border: 1px solid #55efc4;
            color: #55efc4;
            cursor: pointer;
            border-radius: 50px;
            font-family: inherit;
            font-weight: 100;
        }
        button:hover { background: #55efc4; color: #2d3436; }
    </style>
</head>
<body>

    <div id="overlay">
        <h1 id="message" style="font-size: 3.5rem; margin-bottom: 30px; font-weight: 100;">Typing Game</h1>
        <button id="start-btn">Start!</button>
    </div>

    <div id="timer">Time: 60s</div>
    <div id="info">Type the word:</div>
    <div id="word-display"></div>
    <div id="score">Score: 0</div>

    <script>
        // 厳選した60単語
        const wordList = [
            'apple', 'banana', 'cherry', 'orange', 'grape', 'lemon', 'melon', 'peach', 'strawberry', 'pineapple',
            'coffee', 'bread', 'sushi', 'pizza', 'pasta', 'burger', 'cookie', 'chocolate', 'pancake', 'sandwich',
            'cloud', 'system', 'network', 'browser', 'coding', 'program', 'monitor', 'keyboard', 'desktop', 'laptop',
            'internet', 'password', 'database', 'software', 'hardware', 'security', 'website', 'windows', 'iphone', 'android',
            'forest', 'mountain', 'ocean', 'river', 'island', 'flower', 'garden', 'animal', 'rabbit', 'elephant',
            'school', 'station', 'library', 'hospital', 'airport', 'morning', 'evening', 'tomorrow', 'holiday', 'weekend'
        ];

        let targetWord = '';
        let charIndex = 0;
        let score = 0;
        let timeLeft = 60;
        let timerId = null;
        let isPlaying = false;

        const wordDisplay = document.getElementById('word-display');
        const scoreDisplay = document.getElementById('score');
        const timerDisplay = document.getElementById('timer');
        const overlay = document.getElementById('overlay');
        const startBtn = document.getElementById('start-btn');
        const message = document.getElementById('message');

        startBtn.addEventListener('click', () => {
            overlay.style.display = 'none';
            score = 0;
            timeLeft = 60;
            isPlaying = true;
            scoreDisplay.innerText = `Score: ${score}`;
            timerDisplay.innerText = `Time: 60s`;
            timerDisplay.style.color = "#ffeaa7";
            setWord();
            startTimer();
        });

        function startTimer() {
            if (timerId) clearInterval(timerId);
            timerId = setInterval(() => {
                timeLeft--;
                if (timeLeft <= 30 && timeLeft > 0) {
                    timerDisplay.innerText = `残り30秒！ (${timeLeft}s)`;
                    timerDisplay.style.color = "#ff7675";
                } else {
                    timerDisplay.innerText = `Time: ${timeLeft}s`;
                }
                if (timeLeft <= 0) endGame();
            }, 1000);
        }

        function endGame() {
            clearInterval(timerId);
            isPlaying = false;
            overlay.style.display = 'flex';
            message.innerText = `終了！\nScore: ${score}`;
            startBtn.innerText = 'Retry';
        }

        function setWord() {
            targetWord = wordList[Math.floor(Math.random() * wordList.length)];
            charIndex = 0;
            renderWord();
        }

        function renderWord() {
            let html = '';
            for (let i = 0; i < targetWord.length; i++) {
                if (i < charIndex) {
                    html += `<span class="correct">${targetWord[i]}</span>`;
                } else if (i === charIndex) {
                    html += `<span class="current">${targetWord[i]}</span>`;
                } else {
                    html += `<span>${targetWord[i]}</span>`;
                }
            }
            wordDisplay.innerHTML = html;
        }

        window.addEventListener('keydown', (e) => {
            if (!isPlaying) return;
            if (e.key.length !== 1) return;

            if (e.key === targetWord[charIndex]) {
                charIndex++;
                if (charIndex === targetWord.length) {
                    score += 100;
                    scoreDisplay.innerText = `Score: ${score}`;
                    setWord();
                } else {
                    renderWord();
                }
            } else {
                document.body.style.backgroundColor = '#c0392b';
                setTimeout(() => {
                    document.body.style.backgroundColor = '#2d3436';
                }, 100);
            }
        });
    </script>
</body>
</html>
